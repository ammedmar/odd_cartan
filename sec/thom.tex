% !TEX root = ../odd_cartan.tex

\appendix
\section{An effective proof of Thom's theorem}\label{s:thom}

%In this section we will provide an effective proof of Thom's theorem \cite[218]{steenrod1953cyclic} as stated in \cref{ss:homology_operations}.

Let $(A,\psi)$ be a May--Steenrod complex.
Recall that
\[
\rD_i^p \colon \rH_n(A; \Fp) \to \rH_{np+i}(A; \Fp)
\]
is defined, after extending scalar to $\Fp$, by sending an $n$-cycle $a$ to $\psi_i(a^{\ot p})$.
Thom's \cref{t:thom} states that the map $\rD_i^p$ is $0$ unless for some $\varepsilon \in \{0,1\}$ either: $n$ is even and $i+\varepsilon$ is an even multiple of $(p-1)$ or $n$ is odd and $i+\varepsilon$ is an odd multiple of $(p-1)$.
We will lift to the chain level Steenrod's proof of this statement.

Throughout this section, $k \in \Fp$ denotes a fixed non-zero scalar.

\subsection{Thom $i$-boundary constructions}

\begin{definition}
	A \textit{Thom $i$-boundary construction} for $(A,\psi)$ at $p$ is an assignment of an element $\theta_i^p(a)$ in $A$ to every mod~$p$ cycle $a$ in $A$ such that, in $A \ot \Fp$,
	\[
	\bd \theta_i^p(a) = k_i^p(a) \psi_i(a^{\ot p})
	\]
	for some non-zero $k^p_i(a) \in \Fp$ unless, for some $\varepsilon \in \set{0,1}$, either: $n$ is even and $i+\varepsilon$ is an even multiple of $(p-1)$ or $n$ is odd and $i+\varepsilon$ is an odd multiple of $(p-1)$.
\end{definition}

Clearly, the existence of a Thom $i$-boundary construction for each $i \in \N$ implies Thom's Theorem \cref{t:thom}.

\subsection{The map $\lambda$}

\begin{definition}
	The linear map $\lambda \colon \cW(p) \to \cW(p)$ is defined by
	\[
	\lambda(\rho^s e_{2i}) = k^i \rho^{ks} e_{2i}, \qquad
	\lambda(\rho^s e_{2i+1}) = k^i (1+\rho+\dots+\rho^{k-1}) \rho^{ks} e_{2i+1}.
	\]
\end{definition}

\begin{lemma}
	$\lambda$ is a chain map, which is $\cyc_p$-linear if the action of $\rho$ on the target is by $\rho^k$.
\end{lemma}

\begin{proof}
	Using that $\rho N = N$ we have
	\[
	\bd \comp \lambda(\rho^s e_{2i}) = k^i \rho^{ks} \bd (e_{2i}) = k^i \rho^{ks} N e_{2i-1} = k^i N e_{2i-1}
	\]
	and
	\begin{align*}
		\lambda \comp \bd(\rho^s e_{2i}) &= \lambda(N e_{2i-1}) = k^{i-1}(1+\rho+\dots+\rho^{k-1}) (1+\rho^k+\dots+\rho^{kp-k}) e_{2i-1} \\ &=
		k^i N e_{2i-1}
	\end{align*}
	since $(1+\rho+\dots+\rho^{k-1}) (1+\rho^k+\dots+\rho^{kp-k}) = kN$.
	This proves the claim for even degrees.
	For odd degrees, we have
	\begin{multline*}
		\bd \comp \lambda(\rho^s e_{2i+1}) = k^i (1+\rho+\dots+\rho^{k-1}) \rho^{ks} \bd (e_{2i+1}) \\
		= k^i (1+\rho+\dots+\rho^{k-1}) \rho^{ks} T e_{2i} = k^i \rho^{ks} (\rho^k-1) e_{2i}
	\end{multline*}
	and
	\[
	\lambda \comp \bd(\rho^s e_{2i+1}) = \lambda(\rho^s T e_{2i}) = k^i\rho^{ks}(\rho^k-1) e_{2i}.
	\]
	This concludes the proof.
\end{proof}

\begin{remark*}
	In both \cite[p.219]{steenrod1953cyclic} and \cite[p.159]{may1970general} the map $\cW(p) \to \cW(p)$ defined by the assignment
	\[
	e_{2i} \mapsto k^i e_{2i}, \qquad
	e_{2i+1} \mapsto k^i (1+\rho+\dots+\rho^{k-1}) e_{2i+1}
	\]
	is claimed to be a chain map, but the $\cyc_p$-equivariant extension of this assignment is not a chain map with the usual action of $\cyc_p$ on the target $\cW(p)$.
\end{remark*}

\subsection{The element $\gamma$}

Let $\gamma \in \sym_p \cong \mathrm{Bij}(\Fp, \Fp)$ be defined by $\gamma(q) = kq$.
We remark that $\gamma$ is an odd permutation.
We use the notation $\sigma^\gamma = \gamma \sigma \gamma^{-1}$
and notice that $\rho^\gamma = \rho^k$.
This implies that the induced simplicial map $\EE\sym_p \to \EE\sym_p$ restricts to a map $\EE\cyc_p \to \EE\cyc_p$.
We denote its induced chain map by $\gamma_\ast \colon \cC(p) \to \cC(p)$, which is $\cyc_p$-equivariant if the action of $\rho$ on the target is by $\rho^k$.

\subsection{Thom relators}

\begin{definition}
	A \textit{Thom relator} for $(A, \psi)$ at $p$ is a map $L_\psi^p \colon \cW(p) \to \Hom(A^{\ot p}, A)$ with
	\[
	\bd \comp L_\psi^p + L_\psi^p \comp \bd = \gamma \comp \psi - \psi \comp \lambda, \qquad
	L_\psi^p \comp \rho = \rho^k \comp L_\psi^p.
	\]
\end{definition}

% $\cyc_p$-equivariant homotopy between $\gamma \comp \psi$ and $\psi \comp \lambda$ where the action of $\rho$ on the target is by $\rho^k$.
%Explicitly, this means that $L_\psi^p(\rho e_i) = \rho^k L_\psi^p(e_i)$.

\begin{theorem}
	If $L_\psi^p$ is a Thom relator for $(A, \psi)$ at $p$ then
	\[
	\theta_i^p(a) = L_\psi^p(e_i)(a^{\ot p})
	\]
	defines a Thom $i$-boundary construction for $(A, \psi)$ at $p$.
\end{theorem}

\begin{proof}
	Let us write $L$ and $\theta_i$ instead of $L_\psi^p$ and $\theta_\psi^p$.
	Since $a$ is a mod~$p$ cycle,
	\begin{align*}
		\bd_A \theta_i(a) & =
		\bd_A L(e_i)(a^{\ot p}) \\ & =
%		\big(\bd \comp L(e_i) + L(e_i) \comp \bd \big) (a^{\ot p}) \\ & =
		\big(\bd_{\Hom(A)} L(e_i)\big)(a^{\ot p}) \\ & =
		\big((\bd L)(e_i) - L(\bd e_i)\big)(a^{\ot p}) \\ & =
		\big((\psi \comp \lambda - \gamma \comp \psi)(e_i) - L(\bd e_i)\big) (a^{\ot p}).
	\end{align*}
	Since for any $\ell \in \N$,
	\begin{align*}
		&L(\bd e_{2\ell})(a^{\ot p}) = L(N e_{2\ell-1}) = (1+\rho^k+\dots+\rho^{kp-k})L(e_{2\ell-1}) (a^{\ot p}) = 0, \\
		&L(\bd e_{2\ell+1})(a^{\ot p}) = L(T e_{2\ell}) = (\rho^k - 1) L(e_{2\ell})(a^{\ot p}) = 0,
	\end{align*}
	we have
	\begin{align*}
		\bd \comp\, \theta_i(a) & =
		(\psi \comp \lambda - \gamma \comp \psi)(e_i)(a^{\ot p}) \\ & =
		\begin{cases}
			\big(k^\ell - \gamma\big) \psi_i(a^{\ot p}) & i = 2\ell, \\
			\big(k^\ell (1+\rho\dots+\rho^k) - \gamma\big) \psi_i(a^{\ot p}) & i = 2\ell+1,
		\end{cases}
		\\ & =
		\begin{cases}
			\big(k^\ell - (-1)^{\bars{a}}\big) \psi_i(a^{\ot p}) & i = 2\ell, \\
			\big(k^{\ell+1} - (-1)^{\bars{a}}\big) \psi_i(a^{\ot p}) & i = 2\ell+1,
		\end{cases}
	\end{align*}
	where we used that $\gamma$ and $\rho$ are an even and an odd permutation respectively.

	The claim follows from the fact that $k^\ell \equiv 1$ mod $p$ if and only if $\ell = r(p-1)$ for some $r$, and $k^\ell \equiv -1$ mod $p$ if and only if $2\ell = (2r+1)(p-1)$ for some $r$.
\end{proof}

\subsection{Thom relators for Barratt--Eccles algebras}

Recall that $\cC(p) = \chains \EE \cyc_p$ and $\BE(p) = \chains \EE \sym_p$.
Let $A$ be a Barratt--Eccles algebra with structure map $\phi \colon \BE \to \End(A)$, and recall from \cref{ss:may-steenrod on barratt-eccles} the map $\iota \colon \cW \to \cC \hookrightarrow \BE$.
The goal of this subsection if to construct explicit equivariant homotopies making the following diagram commute:
\[
\begin{tikzcd}
	\cW(p) \arrow[r, "\iota"] \arrow[d,"\lambda"] \arrow[dr,phantom,"L_1"] &
	\cC(p) \arrow[r, hook] \arrow[d, "\gamma_\ast"] \arrow[dr,phantom,"L_2"] &
	\BE(p) \arrow[r,"\phi"] \arrow[d,"\gamma"] &
	\Hom(A^{\ot p}, A) \arrow[d,"\gamma"] \\
	\cW(p) \arrow[r, "\iota"] &
	\cC(p) \arrow[r, hook] &
	\BE(p) \arrow[r,"\phi"] &
	\Hom(A^{\ot p}, A).
\end{tikzcd}
\]

\subsubsection{The homotopy $L_1$}

Let us consider the endomorphisms $\xi$ and $\eta$ of $\cC(p)$ given by
\[
\xi(\rho^{s_0},\dots,\rho^{s_n}) =
\begin{cases}
	(\rho^0) & \text{if } n = 0, \\
	\hfil0 & \text{otherwise}.
\end{cases}
\]
and
\[
\eta(\rho^{s_0},\dots,\rho^{s_n}) = (0,\rho^{s_0},\dots,\rho^{s_n})
\]
respectively, and denote by $\mu = \iota \comp \lambda$ and $\nu = \gamma \comp \iota$.
The following claim is easily verified.

\begin{lemma}
	The pair $(\xi,\eta)$ is an idempotent homotopy identity and
	\[
	\xi \comp (\mu - \nu) = 0.
	\]
\end{lemma}
Since $\cW(p)$ has a preferred basis, \cref{t:recursive_homotopy} applies and produces the desired equivariant homotopy $L_1$.

\subsubsection{The homotopy $L_2$}

Since $\gamma_\ast \colon \chains\EE\cyc_p \to \chains\EE\cyc_p$ is the restriction of the chain map $\chains\EE\,(-)^\gamma \colon \chains\EE\sym_p \to \chains\EE\sym_p$ induced by $(-)^\gamma$, the conjugation by $\gamma$, it suffices to construct a $\cyc$-equivariant homotopy $L_2 \colon \chains\EE\sym_p \to \chains\EE\sym_p$ from $\chains\EE\,(-)^\gamma$ to $\gamma$, where $\rho$ acts as $\rho^k$ on the target.
We proceed analogously to \cref{ss:K1}.
Let
\[
L_2(\sigma_0,\dots,\sigma_n) = \sum (-1)^i (\sigma_0\gamma,\dots,\sigma_i\gamma,\sigma_i^\gamma,\dots,\sigma_n^\gamma),
\]
which is $\cyc$-equivariant since
\begin{align*}
	(L_2 \comp \rho)(\rho^{s_0},\dots,\rho^{s_n}) &=
	L_2(\rho^{s_0}\rho, \dots, \rho^{s_n}\rho) \\ &=
	\sum (-1)^i (\rho^{s_0} \rho\,\gamma,\dots,\rho^{s_i} \rho\,\gamma,(\rho^{s_i} \rho)^\gamma,\dots,(\rho^{s_n} \rho)^\gamma) \\ &=
	\sum (-1)^i (\rho^{s_0} \gamma \rho^k,\dots,\rho^{s_i} \gamma \rho^k,(\rho^{s_i})^\gamma \rho^k ,\dots,(\rho^{s_n})^\gamma \rho^k) \\ &=
	(\rho^k \comp L_2)(\rho^{s_0},\dots,\rho^{s_n}).
\end{align*}