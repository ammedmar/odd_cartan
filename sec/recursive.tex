% !TEX root = ../odd_cartan.tex

\section{Homotopies recursively}\label{s:equivariant homotopy general}

\noindent In this section we give a recursive procedure to construct equivariant homotopies for maps between a bounded-below chain complex of free $\Z[G]$-modules and a chain complex equipped with a contraction.


\begin{definition}
	A \textit{homotopy identity} is a pair $(\xi,\eta)$, where $\xi \colon D \to D$ is a chain map and $\eta$ is a homotopy from $\xi$ to $\id_D$. We say that $(\xi, \eta)$ is \textit{idempotent} if $\xi \comp \eta = 0$.
\end{definition}
In a homotopy identity $\xi \comp \xi$ is homotopic to $\xi$ via the homotopy $\xi \comp \eta$. If the homotopy identity is idempotent, then the homotopy vanishes, thus $\xi \comp \xi = \xi$.



\begin{theorem}\label{t:recursive_homotopy}
	Let $C$ a bounded-below chain complex of free $\Z[G]$-modules with a basis.
	Let $D$ be a chain complex of $\Z[G]$-modules together with a $(\Z$-linear$)$ idempotent homotopy identity $(\xi, \eta)$.
	Then, for any pair of $\Z[G]$-linear chain maps $\mu,\nu \colon C \to D$ with $\xi \comp (\mu -\nu) = 0$, the $\Z[G]$-linear map $H \colon C \to D$ recursively defined on basis elements by
	\begin{equation}\label{eq:lemma def}
		H(b) = \eta \comp (\mu - \nu - H \comp \bd)(b)
	\end{equation}
	and extended linearly, is a $G$-equivariant homotopy from $\nu$ to $\mu$.
\end{theorem}

\begin{proof}
	We will use an induction argument on the degree of $b$.
	Suppressing composition symbols we have
	\begin{align*}
		(\bd H + H \bd)(b)
		&= \bd \eta(\mu - \nu - H \bd)(b) + H \bd (b) \\
		&= (\id_D - \xi - \eta \bd)(\mu - \nu - H \bd)(b) + H \bd(b) \\
		&= (\mu-\nu)(b) - (\xi + \eta \bd)(\mu - \nu - H \bd)(b).
	\end{align*}
	Therefore, the claim follows from proving the identity
	\begin{equation}\label{eq:lemma want}
		(\xi + \eta \bd)(\mu - \nu - H \bd)(b) = 0.
	\end{equation}
	In the lowest degree $b$, $\mu(b)$ and $\nu(b)$ are cycles, so \eqref{eq:lemma want} reduces to $\xi(\mu-\nu) = 0$, which gives the base case of the induction.	For the induction step, observe first that $\xi H$ vanishes on basis elements because $\xi\eta = 0$, and thus vanishes on all elements. As $\xi (\mu-\nu) = 0$, the identity \eqref{eq:lemma want} reduces to
    \[
        \eta\bd(\mu-\nu-H\bd)(b) = 0.
     \]
    Since $\bd(\mu-\nu-H\bd)(b) = (\mu-\nu-\bd H)(\bd b)$, we may apply the induction hypothesis to equate the latter to $(H\bd)(\bd b)$, which vanishes.
\end{proof}

\begin{remark*}
	A \emph{strong deformation retract} \cite{Lambe-Stasheff} of a chain complex $D$ is a tuple $(D',f,g,\eta)$, where $f\colon D' \to D$ and $g\colon D\to D'$ are chain maps, $g \comp f = \id_{D'}$ and $\eta$ is a homotopy from $\xi=f \comp g$ to $\id_D$. If $D'$ is a subcomplex of $D$, then the data of a strong deformation retract can be summarised as a homotopy identity $(\xi,\eta)$ such that $\xi\comp\xi = \xi$. A \emph{contraction} \cite{EML,gonzalez2003computation} is a strong deformation retract that additionally satisfies the following:
	\[
	\text{(i)}\ \xi \comp \eta = 0, \quad
	\text{(ii)}\ \eta \comp \xi = 0, \quad
	\text{(iii)}\ \eta \comp \eta = 0.
	\]
	Using this language, an idempotent homotopy identity is a strong deformation retract satisfying (i), and we remark that \cref{t:recursive_homotopy} is an adaptation of \cite[p.367]{Lambe-Stasheff}.
\end{remark*}


%\subsection{Equivariant homotopy construction}\label{ss:equivariant homotopy general}
%
%\begin{lemma}
%	Let $G$ be a group, $C$ a bounded-below graded chain complex of free $\Z[G]$-modules with a basis, and $D$ a graded chain complex of $\Z[G]$-modules together with a $\Z$-linear endomorphism $\eta$ satisfying for some chain endomorphism $\varepsilon$ that:
%	\begin{enumerate}
%		\item $\bd \comp \, \eta + \eta \comp \bd = \id_C - \varepsilon$,
%		\item $\varepsilon \comp \eta = 0$.
%	\end{enumerate}
%	Then, for any pair of $\Z[G]$-linear chain maps $\mu,\nu \colon C \to D$ with $\varepsilon \comp (\mu-\nu) = 0$, the $\Z[G]$-linear map $K \colon C \to D$ recursively defined on basis elements by
%	\[
%	K(b) = \eta \comp (\mu - \nu - K \comp \bd)(b),
%	\]
%	satisfies
%	\[
%	\bd \comp \, K + K \comp \bd = \mu - \nu.
%	\]
%\end{lemma}
%
%\begin{proof}
%	We will use an induction argument.
%	Suppressing composition symbols we have
%	\begin{align*}
%		(\bd K+ 'bd)(b)
%		&= \bd \eta(\mu-\nu-K\bd)(b) + K\bd(b) \\
%		&= (\id_C - \varepsilon - \eta\bd)(\mu-\nu - K\bd)(b) + K\bd(b).
%	\end{align*}
%	If $b$ is a cycle we are done since $\varepsilon(\mu-\nu) = 0$ by assumption, in particular if $b$ is of lowest degree. For an arbitrary $b$, since $\varepsilon \eta = 0$ we have $\varepsilon K \bd(b) \defeq \varepsilon \eta(\mu-\nu-K)(\bd b) = 0$, so $\varepsilon(\mu-\nu-K\partial) = 0$.
%	Additionally, by the induction assumption $\bd K (\bd b) = (\mu-\nu-K\bd)(\bd b) = (\mu-\nu)(\bd b)$ we have $\eta \bd (\mu-\nu - K\bd)(b) = 0$.
%	Therefore, we are left with
%	\begin{align*}
%		(\bd K+ K\bd)(b) &=
%		\id_C(\mu-\nu-K\bd)(b)+K\bd(b) \\&=
%		(\mu-\nu)(b)
%	\end{align*}
%	as desired.
%\end{proof}
